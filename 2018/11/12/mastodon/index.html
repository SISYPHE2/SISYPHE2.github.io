<!DOCTYPE html><html><head><meta charset="UTF-8"><title>how to deploy your own mastodon instance</title><link rel="stylesheet" href="css/normalize.css"><link rel="stylesheet" href="/css/hexo-theme-adoubi.css"><link rel="icon" href="/images/favicon.ico"></head><body><div class="header"><a class="github-link" href="https://github.com/SISYPHE2"><img class="github-image" src="/images/Aquicon-Github-small.png"></a><a class="email-link" href="mailto:null"><img class="email-image" src="/images/email-small.png"></a><a class="subscribe-link" href="/atom.xml"><img class="subscribe-image" src="/images/subscribe-small.png"></a></div><div class="content"><div class="post-item"></div><h2 class="post-title-wrapper"><p class="post-title">how to deploy your own mastodon instance</p></h2><div class="post-date"><time datetime="2018-11-12T11:43:20.958Z">2018-11-12</time></div><div class="post-content"><p>Hi,this is tiasum.I’m a CS student in shanghai normal university.My life is looking for something real interesting.</p>
<h2 id="Development-environment"><a href="#Development-environment" class="headerlink" title="Development environment"></a>Development environment</h2><p>server version:fedora 27<br>docker version:v 1.13.1</p>
<h3 id="Prerequisites"><a href="#Prerequisites" class="headerlink" title="Prerequisites"></a>Prerequisites</h3><p>-(+<em>)Nginx(or Apache2;not officially supported).-(+</em>)Recent stable version of Docker-(+*)Recent stable version of Docker-compose</p>
<h3 id="Setting-up"><a href="#Setting-up" class="headerlink" title="Setting up"></a>Setting up</h3><p>Clone Mastodon’s repository</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/tootsuite/mastodon.git</span><br></pre></td></tr></table></figure>
<p>Checkout to the lastest stable branch<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout $(git tag -l | grep -v <span class="string">'rc[0-9]*$'</span> |sort -V |tail -n -1)</span><br></pre></td></tr></table></figure></p>
<p>Review the settings in docker-compose.yml.</p>
<h3 id="progress"><a href="#progress" class="headerlink" title="progress"></a>progress</h3><p>your instance is identified by its domain name.Changing it afterward wiil break things.<br>Domain name:/tiasum.top your domain name</p>
<p>single user mode disable registrations and redirects the landing page to your public profile.<br>do you what to enable single user mode? no</p>
<p>are you using docker to run mastodon? yes</p>
<p>postgresql:tiasum<br>postsql port:888<br>name of postgresql database:shanghai<br>name of postgresql user:postgresql<br>password for database:</p>
<h3 id="bundler"><a href="#bundler" class="headerlink" title="bundler"></a>bundler</h3><p>ruby gems</p>
<h3 id="postgresql"><a href="#postgresql" class="headerlink" title="postgresql"></a>postgresql</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dnf install postgresql</span><br></pre></td></tr></table></figure>
<p>default /var/lib/pgsql</p>
<p>auth chown postgres /var/lib/pgsql/data<br>add user<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">useradd postgres</span><br><span class="line">passwd postgres</span><br></pre></td></tr></table></figure></p>
<p>make a dir for data</p>
</div></div><div class="footer"><div class="footer-copyright">Theme By <a href="https://github.com/shinux/hexo-theme-adoubi">Adoubi</a> , Powered By Hexo.</div></div></body></html>